<!--
  卡片列表项组件
  显示缩略图、标题、创建者、互动数
  Requirements: 4.4
-->
<view class="card-item" bind:tap="onTapCard">
  <!-- 缩略图 -->
  <view class="card-item__thumbnail">
    <van-image
      width="100%"
      height="100%"
      fit="cover"
      src="{{thumbnail}}"
      lazy-load
      bind:error="onImageError"
    />
    <!-- 点赞状态角标 -->
    <view wx:if="{{card.is_liked}}" class="card-item__liked-badge">
      <van-icon name="like" color="#ff4d4f" size="24rpx" />
    </view>
  </view>

  <!-- 卡片信息 -->
  <view class="card-item__content">
    <!-- 标题 -->
    <view class="card-item__title text-ellipsis-2">{{card.title || '无标题'}}</view>

    <!-- 底部信息 -->
    <view class="card-item__footer">
      <!-- 创建者信息 -->
      <view wx:if="{{showCreator}}" class="card-item__creator" catch:tap="onTapCreator">
        <image 
          class="card-item__avatar" 
          src="{{creatorAvatar}}" 
          mode="aspectFill"
          binderror="onAvatarError"
        />
        <text class="card-item__creator-name text-ellipsis">{{creatorName}}</text>
      </view>

      <!-- 互动数据 -->
      <view wx:if="{{showStats}}" class="card-item__stats">
        <view class="card-item__stat">
          <van-icon name="like-o" size="28rpx" color="#999" />
          <text class="card-item__stat-text">{{likeCountText}}</text>
        </view>
        <view class="card-item__stat">
          <van-icon name="comment-o" size="28rpx" color="#999" />
          <text class="card-item__stat-text">{{commentCountText}}</text>
        </view>
      </view>
    </view>
  </view>
</view>

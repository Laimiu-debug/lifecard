<!--pages/transactions/transactions.wxml-->
<!--
  äº¤æ˜“å†å²é¡µé¢
  æ˜¾ç¤ºé‡‘å¸äº¤æ˜“è®°å½•åˆ—è¡¨
  Requirements: 11.2, 11.3, 11.4
-->
<view class="page-container">
  <!-- ä½™é¢å¡ç‰‡ Requirements: 11.1 -->
  <view class="balance-card">
    <view class="balance-header">
      <text class="balance-label">å½“å‰ä½™é¢</text>
    </view>
    <view class="balance-content">
      <text class="coin-icon">ğŸª™</text>
      <text class="balance-amount">{{coinBalance}}</text>
      <text class="balance-unit">é‡‘å¸</text>
    </view>
  </view>

  <!-- äº¤æ˜“è®°å½•æ ‡é¢˜ -->
  <view class="section-header">
    <text class="section-title">äº¤æ˜“è®°å½•</text>
    <text class="section-count" wx:if="{{total > 0}}">å…± {{total}} æ¡</text>
  </view>

  <!-- äº¤æ˜“è®°å½•åˆ—è¡¨ Requirements: 11.2, 11.3, 11.4 -->
  <view class="transaction-list" wx:if="{{transactions.length > 0}}">
    <view 
      class="transaction-item" 
      wx:for="{{transactions}}" 
      wx:key="id"
    >
      <!-- äº¤æ˜“å›¾æ ‡ -->
      <view class="transaction-icon {{item.isEarn ? 'earn' : 'spend'}}">
        <text>{{item.typeIcon}}</text>
      </view>

      <!-- äº¤æ˜“ä¿¡æ¯ -->
      <view class="transaction-info">
        <view class="transaction-main">
          <text class="transaction-desc">{{item.description}}</text>
          <text class="transaction-amount {{item.isEarn ? 'amount-earn' : 'amount-spend'}}">
            {{item.formattedAmount}}
          </text>
        </view>
        <view class="transaction-meta">
          <text class="transaction-type">{{item.typeLabel}}</text>
          <text class="transaction-date">{{item.formattedDate}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-container" wx:if="{{isEmpty && !loading}}">
    <empty-state
      icon="ğŸ“‹"
      title="æš‚æ— äº¤æ˜“è®°å½•"
      description="åˆ›å»ºå¡ç‰‡æˆ–äº¤æ¢å¡ç‰‡åï¼Œäº¤æ˜“è®°å½•å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ"
    />
  </view>

  <!-- åŠ è½½æ›´å¤š -->
  <view class="load-more" wx:if="{{transactions.length > 0}}">
    <view class="loading-indicator" wx:if="{{loading}}">
      <view class="loading-spinner-small"></view>
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>
    <text class="no-more-text" wx:elif="{{!hasMore}}">æ²¡æœ‰æ›´å¤šäº†</text>
  </view>

  <!-- åˆå§‹åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{loading && transactions.length === 0}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>
</view>
